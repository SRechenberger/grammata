program Map 
with

begin
	lambda g(z) is
		\$x . $z * $x * $x
	end

	lambda apply(f,x) is
		($f $x)
	end

	base map says
		map(F,nil,nil).
		map(F,c(X,XS), c(apply(F,X),XS1)) :- map(F,XS,XS1).
	end

	query askMap(f,list) 
	asks map 
	for Xs
	?- map(f,list,Xs)
	end

	func main() 
	with
		var xs := c(1,c(2,c(3,c(4,nil))));
		var f := g(5);
	does
		return askMap($f,$xs);
	end
end
program Map 
with

begin
	lambda g(z) is
		\$x . $z * $x * $x
	end

	lambda apply(f,x) is
		($f $x)
	end

	base map says
		map(f,nil,nil).
		map(f,c(X,XS), c(apply(f,X),XS1)) :- map(f,XS,XS1).
	end

	query askMap(f,list) 
	asks map 
	for Xs
	?- map(f,list,Xs)
	end

	func main() 
	with
		var xs := c(1,c(2,c(3,c(4,nil))));
		var f := g(5);
	does
		return apply($f,2);
	end
end